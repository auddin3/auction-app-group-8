import{_ as u,c as i,a as t,w as p,v as m,F as h,r as f,o as r,t as n,b as g,d as v}from"./index.18052401.js";const w={data(){return{products:[],query:"",search:"",imgpath:"/media/product-images/stock-image.png",endOfBidFormatted:!1,noOfSecsLeft:0}},computed:{filteredProducts(){return JSON.parse(JSON.stringify(this.products)).filter(e=>e.product_name.toLowerCase().includes(this.search.toLowerCase())||e.description.toLowerCase().includes(this.search.toLowerCase()))}},methods:{view_item_details(a){try{this.$router.push({name:"Items",path:"/items/:pid",params:{pid:a.id}})}catch(e){console.log(e)}},formatTime(a){let e=new Date,s=(new Date(a.end_of_bid).valueOf()-e.valueOf())/1e3,d=Math.floor(s/(24*3600));s=s%(24*3600);let o=Math.floor(s/3600);s=s%3600;let _=Math.floor(s/60);return d+" Days "+o+" Hours "+_+" Minutes "}},async mounted(){try{let l=await(await fetch("http://localhost:8000/auctionapp/user",{credentials:"include",mode:"cors",referrerPolicy:"no-referrer",method:"GET"})).json()}catch{window.location.href="http://localhost:8000/auctionapp"}let e=await(await fetch("http://127.0.0.1:8000/auctionapp/api/products/")).json();e.products.forEach(c=>c.end_of_bid=this.formatTime(c)),this.products=e.products,this.endOfBidFormatted=!0}};const y=t("div",{class:"auctions"},[t("h1",{class:""},"Auctions")],-1),x={id:"search"},O={class:"search-box p-3 mt-4"},b={class:"card-group"},L={class:"card mt-4"},k={key:0,class:"img-div"},S=["src"],B={key:1,class:"img-div"},C=["src"],D={class:"card mt-4",style:{width:"60rem"}},T={class:"card-body"},P={class:"card-title"},F={class:"card-text"},M={class:"card-text price-colour"},N={key:0},V={class:"card-text mt-4"},A=t("strong",null,"Owner:",-1),I=["onClick"],E=t("strong",null,"View Item",-1),J=[E];function U(a,e,c,l,s,d){return r(),i(h,null,[y,t("div",x,[t("div",O,[p(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>s.search=o),class:"input-box p-2",placeholder:" Search Upcoming Bids"},null,512),[[m,s.search]])])]),(r(!0),i(h,null,f(d.filteredProducts,o=>(r(),i("div",null,[t("div",b,[t("div",L,[o.product_image.length>0?(r(),i("div",k,[t("img",{class:"card-img-top product-image",src:`http://localhost:8000${o.product_image}`,alt:"Item image"},null,8,S)])):(r(),i("div",B,[t("img",{class:"card-img-top product-image",src:`http://localhost:8000${s.imgpath}`,alt:"Item image"},null,8,C)]))]),t("div",D,[t("div",T,[t("h4",P,n(o.product_name),1),t("p",F,n(o.description),1),t("p",M,[t("strong",null,"Start Price: \xA3"+n(o.start_price),1)]),s.endOfBidFormatted==!0?(r(),i("p",N,[t("strong",null,n(o.end_of_bid)+" Left",1)])):g("",!0),t("p",V,[A,v(" "+n(o.owner),1)]),t("button",{onClick:_=>d.view_item_details(o),class:"btn btn-secondary"},J,8,I)])])])]))),256))],64)}const q=u(w,[["render",U]]);export{q as default};
